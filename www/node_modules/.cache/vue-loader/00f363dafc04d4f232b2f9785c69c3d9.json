{"remainingRequest":"C:\\Users\\Meng Yin\\Desktop\\COVID-19-Visualization-master\\www\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\Meng Yin\\Desktop\\COVID-19-Visualization-master\\www\\src\\components\\Map.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\Meng Yin\\Desktop\\COVID-19-Visualization-master\\www\\src\\components\\Map.vue","mtime":1584631036000},{"path":"C:\\Users\\Meng Yin\\Desktop\\COVID-19-Visualization-master\\www\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\Meng Yin\\Desktop\\COVID-19-Visualization-master\\www\\node_modules\\thread-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\Meng Yin\\Desktop\\COVID-19-Visualization-master\\www\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"C:\\Users\\Meng Yin\\Desktop\\COVID-19-Visualization-master\\www\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\Meng Yin\\Desktop\\COVID-19-Visualization-master\\www\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB7TWFwQ3RsLCBsb2FkUG9seWdvbn0gZnJvbSAiLi4vanMvbWFwIjsKaW1wb3J0IHtQcm92aW5jZXN9IGZyb20gIi4uL2pzL3JlZ2lvbiI7CmltcG9ydCAqIGFzIG1hcHRhbGtzIGZyb20gJ21hcHRhbGtzJzsKaW1wb3J0IHtsb2FkQnVpbGRpbmd9IGZyb20gIi4uL2pzL2J1aWxkaW5nIjsKaW1wb3J0IHtsb2FkTGluZXMzRH0gZnJvbSAiLi4vanMvbGluZXMzRCI7CmltcG9ydCB7IFV0aWxzIH0gZnJvbSAnLi4vanMvdXRpbHMnOwoKZXhwb3J0IGRlZmF1bHQgewogICAgbmFtZTogJ01hcCcsCiAgICBkYXRhICgpIHsKICAgICAgICByZXR1cm4gewogICAgICAgICAgICBtYXA6IG51bGwsCiAgICAgICAgICAgIHBsYW5lTGF5ZXI6IG51bGwsCiAgICAgICAgICAgIGJ1aWxkaW5nTGF5ZXI6IG51bGwsCiAgICAgICAgICAgIGN1cnJlbnRQcm92aW5jZTogIjUxMDAwMCIsCiAgICAgICAgICAgIGN1cnJlbnRDaXR5OiAiIiwKICAgICAgICAgICAgZGF0YTogbnVsbCwKICAgICAgICAgICAgbWFwczogWwogICAgICAgICAgICAgICAge2xhYmVsOiAn5bi46KeE5Zyw5Zu+JywgbWFwOiAnR2FvZGUnLCB0eXBlOiAnMCcsIGluZGV4OiAwfSwgCiAgICAgICAgICAgICAgICB7bGFiZWw6ICfmmpfpu5EyLjVEJywgbWFwOiAnR2FvZGUnLCB0eXBlOiAnMScsIGluZGV4OiAxfSwgCiAgICAgICAgICAgICAgICB7bGFiZWw6ICczROWcuuaZrycsIG1hcDogJ0dhb2RlJywgdHlwZTogJzEnLCBpbmRleDogMn1dLAogICAgICAgICAgICBtYXBJbmRleDogMSwKICAgICAgICAgICAgcHJvdmluY2VzOiBPYmplY3Qua2V5cyhQcm92aW5jZXMpLm1hcChrID0+ICh7Y29kZTogaywgbmFtZTogUHJvdmluY2VzW2tdLm5hbWV9KSkKICAgICAgICB9OwogICAgfSwKICAgIG1vdW50ZWQgKCkgewogICAgICAgIHRoaXMubWFwSW5kZXggPSBwYXJzZUludChVdGlscy5nZXRDb29raWUoIm1hcEluZGV4IiwgMSkpOwogICAgICAgIHRoaXMuaW5pdCgpOwogICAgICAgIHRoaXMubG9hZFByb3ZpbmNlKHRoaXMuY3VycmVudFByb3ZpbmNlKTsKICAgIH0sCiAgICBtZXRob2RzOiB7CiAgICAgICAgaW5pdCAoKSB7CiAgICAgICAgICAgIGxldCBtYXBDb25maWcgPSBNYXBDdGwuZ2V0Q29uZmlnKCk7CiAgICAgICAgICAgIHRoaXMubWFwID0gbmV3IG1hcHRhbGtzLk1hcCgnbWFwJywgbWFwQ29uZmlnKTsKICAgICAgICAgICAgdGhpcy5tYXAub24oJ21vdmVlbmQnLCBNYXBDdGwuaGFuZGxlTWFwTW92ZSk7CiAgICAgICAgfSwKICAgICAgICBsb2FkUHJvdmluY2UgKGNvZGUpIHsKICAgICAgICAgICAgbGV0ICR0aGlzID0gdGhpczsKICAgICAgICAgICAgTWFwQ3RsLmxvYWREYXRhKGNvZGUsIGZ1bmN0aW9uIChmZWF0dXJlcykgewogICAgICAgICAgICAgICAgbGV0IGNlbnRlciA9IChjb2RlIGluIFByb3ZpbmNlcykgPyBQcm92aW5jZXNbY29kZV0uY3AgOiBudWxsOwogICAgICAgICAgICAgICAgaWYgKGZlYXR1cmVzLmZlYXR1cmVzWzBdKSBjZW50ZXIgPSBmZWF0dXJlcy5mZWF0dXJlc1swXS5wcm9wZXJ0aWVzLmNwOwogICAgICAgICAgICAgICAgJHRoaXMubWFwLnNldENlbnRlcihjZW50ZXIpOwogICAgICAgICAgICAgICAgJHRoaXMubWFwLnNldFpvb20oMTEpOwogICAgICAgICAgICAgICAgJHRoaXMuZGF0YSA9IGZlYXR1cmVzOwogICAgICAgICAgICAgICAgJHRoaXMubG9hZE1hcCgkdGhpcy5tYXBJbmRleCwgZmVhdHVyZXMpOwogICAgICAgICAgICB9KTsKICAgICAgICB9LAogICAgICAgIGxvYWRNYXAgKGlkeCwgZmVhdHVyZXMpIHsKICAgICAgICAgICAgbGV0IGZ1bnMgPSBbbG9hZFBvbHlnb24sIGxvYWRCdWlsZGluZywgbG9hZExpbmVzM0RdOwogICAgICAgICAgICBmdW5zW2lkeF0odGhpcy5tYXAsIGZlYXR1cmVzKTsKICAgICAgICB9LAogICAgICAgIHJlc2V0TWFwOiBmdW5jdGlvbiAoaWR4KSB7CiAgICAgICAgICAgIGxldCBpdGVtID0gdGhpcy5tYXBzW2lkeF07CiAgICAgICAgICAgIFV0aWxzLnNldENvb2tpZSgibWFwU3R5bGUiLCBbaXRlbS5tYXAsIGl0ZW0udHlwZV0uam9pbigiXyIpKTsKICAgICAgICAgICAgVXRpbHMuc2V0Q29va2llKCJtYXBJbmRleCIsIGlkeCk7CiAgICAgICAgICAgIHRoaXMubWFwLnJlbW92ZSgpOwogICAgICAgICAgICB0aGlzLm1hcCA9IG51bGw7CiAgICAgICAgICAgIHRoaXMuaW5pdCgpOwogICAgICAgICAgICB0aGlzLmxvYWRNYXAoaWR4LCB0aGlzLmRhdGEpOwogICAgICAgIH0KICAgIH0KfQo="},{"version":3,"sources":["Map.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAkCA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Map.vue","sourceRoot":"src/components","sourcesContent":["<template>\n    <div id=\"root\">\n        <div id=\"map\" style=\"height: 100%\">地图</div>\n        <div style=\"position: fixed; right: 10px; top: 160px; width: 100px; \">\n              <el-select v-model=\"currentProvince\" size=\"small\" placeholder=\"请选择\" @change=\"loadProvince\">\n                <el-option\n                v-for=\"item in provinces\"\n                :key=\"item.code\"\n                :label=\"item.name\"\n                :value=\"item.code\">\n                </el-option>\n            </el-select>\n        </div>\n\n        <div style=\"position: fixed; right: 10px; top: 120px; width: 100px\">\n              <el-select v-model=\"mapIndex\" size=\"small\" placeholder=\"请选择\" @change=\"resetMap\">\n                <el-option\n                v-for=\"item in maps\"\n                :key=\"item.index\"\n                :label=\"item.label\"\n                :value=\"item.index\">\n                </el-option>\n            </el-select>\n        </div>\n\n        <div style=\"position: fixed; right: 10px; top: 90px; font-weight: 400; font-family: 宋体;  \" class=\"blink\">\n            <router-link to=\"/china\">返回</router-link>\n        </div>\n    </div>\n    \n    \n</template>\n\n<script>\nimport {MapCtl, loadPolygon} from \"../js/map\";\nimport {Provinces} from \"../js/region\";\nimport * as maptalks from 'maptalks';\nimport {loadBuilding} from \"../js/building\";\nimport {loadLines3D} from \"../js/lines3D\";\nimport { Utils } from '../js/utils';\n\nexport default {\n    name: 'Map',\n    data () {\n        return {\n            map: null,\n            planeLayer: null,\n            buildingLayer: null,\n            currentProvince: \"510000\",\n            currentCity: \"\",\n            data: null,\n            maps: [\n                {label: '常规地图', map: 'Gaode', type: '0', index: 0}, \n                {label: '暗黑2.5D', map: 'Gaode', type: '1', index: 1}, \n                {label: '3D场景', map: 'Gaode', type: '1', index: 2}],\n            mapIndex: 1,\n            provinces: Object.keys(Provinces).map(k => ({code: k, name: Provinces[k].name}))\n        };\n    },\n    mounted () {\n        this.mapIndex = parseInt(Utils.getCookie(\"mapIndex\", 1));\n        this.init();\n        this.loadProvince(this.currentProvince);\n    },\n    methods: {\n        init () {\n            let mapConfig = MapCtl.getConfig();\n            this.map = new maptalks.Map('map', mapConfig);\n            this.map.on('moveend', MapCtl.handleMapMove);\n        },\n        loadProvince (code) {\n            let $this = this;\n            MapCtl.loadData(code, function (features) {\n                let center = (code in Provinces) ? Provinces[code].cp : null;\n                if (features.features[0]) center = features.features[0].properties.cp;\n                $this.map.setCenter(center);\n                $this.map.setZoom(11);\n                $this.data = features;\n                $this.loadMap($this.mapIndex, features);\n            });\n        },\n        loadMap (idx, features) {\n            let funs = [loadPolygon, loadBuilding, loadLines3D];\n            funs[idx](this.map, features);\n        },\n        resetMap: function (idx) {\n            let item = this.maps[idx];\n            Utils.setCookie(\"mapStyle\", [item.map, item.type].join(\"_\"));\n            Utils.setCookie(\"mapIndex\", idx);\n            this.map.remove();\n            this.map = null;\n            this.init();\n            this.loadMap(idx, this.data);\n        }\n    }\n}\n</script>\n\n<!-- Add \"scoped\" attribute to limit CSS to this component only -->\n<style>\n.pageHead {\n  height: 100px !important; \n  padding-top: 5px !important;\n  padding-bottom: 10px !important;\n}\n#root {\n    height: calc(100% - 115px); \n}\na{color: #dd4814}\n.el-input__inner { color: #fff; background-color: #0c2c45}\n.content{color:#fff;width:190px;height:80px;background-color:#051127;border:1px solid #0c2c45}\n.pop_title{float:left;padding-left:10px;width:180px;height:36px;line-height:36px;background:url(../assets/title.png);font-weight:bold;font-size:16px}\n.pop_dept{float:left;padding:12px 5px;line-height:15px;text-align:center;margin:0 10px}\n.pop_arrow{float:left;width:15px;height:24px;line-height:24px;background:url(../assets/arrow.png) no-repeat center center}\n.arrow{display:block;width:17px;height:10px;background:url(../assets/em.png) no-repeat;position:absolute;left:50%;margin-left:-5px;bottom:-10px}\n</style>\n"]}]}