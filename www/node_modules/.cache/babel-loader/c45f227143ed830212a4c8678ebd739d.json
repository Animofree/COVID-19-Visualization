{"remainingRequest":"C:\\Users\\Meng Yin\\Desktop\\COVID-19-Visualization\\www\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\Meng Yin\\Desktop\\COVID-19-Visualization\\www\\node_modules\\eslint-loader\\index.js??ref--13-0!C:\\Users\\Meng Yin\\Desktop\\COVID-19-Visualization\\www\\src\\js\\lines3D.js","dependencies":[{"path":"C:\\Users\\Meng Yin\\Desktop\\COVID-19-Visualization\\www\\src\\js\\lines3D.js","mtime":1584631036000},{"path":"C:\\Users\\Meng Yin\\Desktop\\COVID-19-Visualization\\www\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\Meng Yin\\Desktop\\COVID-19-Visualization\\www\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"C:\\Users\\Meng Yin\\Desktop\\COVID-19-Visualization\\www\\node_modules\\eslint-loader\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZm9yLWVhY2giOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5qb2luIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkubWFwIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuZnVuY3Rpb24ubmFtZSI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLm9iamVjdC50by1zdHJpbmciOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5zZXQiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5zdHJpbmcuaXRlcmF0b3IiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy93ZWIuZG9tLWNvbGxlY3Rpb25zLmZvci1lYWNoIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvd2ViLmRvbS1jb2xsZWN0aW9ucy5pdGVyYXRvciI7CmltcG9ydCBfY2xhc3NDYWxsQ2hlY2sgZnJvbSAiQzpcXFVzZXJzXFxNZW5nIFlpblxcRGVza3RvcFxcQ09WSUQtMTktVmlzdWFsaXphdGlvblxcd3d3XFxub2RlX21vZHVsZXNcXEBiYWJlbFxccnVudGltZS9oZWxwZXJzL2VzbS9jbGFzc0NhbGxDaGVjayI7CmltcG9ydCBfY3JlYXRlQ2xhc3MgZnJvbSAiQzpcXFVzZXJzXFxNZW5nIFlpblxcRGVza3RvcFxcQ09WSUQtMTktVmlzdWFsaXphdGlvblxcd3d3XFxub2RlX21vZHVsZXNcXEBiYWJlbFxccnVudGltZS9oZWxwZXJzL2VzbS9jcmVhdGVDbGFzcyI7CmltcG9ydCBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybiBmcm9tICJDOlxcVXNlcnNcXE1lbmcgWWluXFxEZXNrdG9wXFxDT1ZJRC0xOS1WaXN1YWxpemF0aW9uXFx3d3dcXG5vZGVfbW9kdWxlc1xcQGJhYmVsXFxydW50aW1lL2hlbHBlcnMvZXNtL3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4iOwppbXBvcnQgX2dldFByb3RvdHlwZU9mIGZyb20gIkM6XFxVc2Vyc1xcTWVuZyBZaW5cXERlc2t0b3BcXENPVklELTE5LVZpc3VhbGl6YXRpb25cXHd3d1xcbm9kZV9tb2R1bGVzXFxAYmFiZWxcXHJ1bnRpbWUvaGVscGVycy9lc20vZ2V0UHJvdG90eXBlT2YiOwppbXBvcnQgX2luaGVyaXRzIGZyb20gIkM6XFxVc2Vyc1xcTWVuZyBZaW5cXERlc2t0b3BcXENPVklELTE5LVZpc3VhbGl6YXRpb25cXHd3d1xcbm9kZV9tb2R1bGVzXFxAYmFiZWxcXHJ1bnRpbWUvaGVscGVycy9lc20vaW5oZXJpdHMiOwppbXBvcnQgKiBhcyBtYXB0YWxrcyBmcm9tICdtYXB0YWxrcyc7CmltcG9ydCAqIGFzIFRIUkVFIGZyb20gInRocmVlIjsKaW1wb3J0IHsgVGhyZWVMYXllciwgQmFzZU9iamVjdCB9IGZyb20gJ21hcHRhbGtzLnRocmVlJzsKaW1wb3J0IHsgSW5pdEJsb29tIH0gZnJvbSAiLi9ibG9vbSI7CnZhciB0aHJlZUxheWVyOwoKZnVuY3Rpb24gbG9hZExpbmVzM0QobWFwLCBkYXRhKSB7CiAgdmFyIGxhYmVsTWVzaGVzID0gW107CiAgaWYgKG1hcC5nZXRMYXllcignbGluZXMnKSkgdGhyZWVMYXllci5yZW1vdmUoKTsKICB0aHJlZUxheWVyID0gbmV3IFRocmVlTGF5ZXIoJ2xpbmVzJywgewogICAgZm9yY2VSZW5kZXJPbk1vdmluZzogdHJ1ZSwKICAgIGZvcmNlUmVuZGVyT25Sb3RhdGluZzogdHJ1ZQogIH0pOwoKICB0aHJlZUxheWVyLnByZXBhcmVUb0RyYXcgPSBmdW5jdGlvbiAoZ2wsIHNjZW5lKSB7CiAgICB2YXIgbGlnaHQgPSBuZXcgVEhSRUUuRGlyZWN0aW9uYWxMaWdodCgweGZmZmZmZik7CiAgICBsaWdodC5wb3NpdGlvbi5zZXQoMCwgLTEwLCAxMCkubm9ybWFsaXplKCk7CiAgICBzY2VuZS5hZGQobGlnaHQpOwogICAgdGhpcy5pbml0Qmxvb20oKTsKICAgIHRoaXMuc2V0UmVuZGVyZXJSZW5kZXJTY2VuZSgpOwogICAgZGF0YS5mZWF0dXJlcy5mb3JFYWNoKGZ1bmN0aW9uIChnKSB7CiAgICAgIC8vIGlmIChnLmdlb21ldHJ5LnR5cGUgPT0gIk11bHRpUG9seWdvbiIpIHJldHVybjsKICAgICAgdmFyIG5hbWUgPSBnLnByb3BlcnRpZXMubmFtZTsKICAgICAgaWYgKG5hbWUubGVuZ3RoIDwgNSkgbmFtZSArPSAiICAgIjsKICAgICAgdmFyIGxhYmVsTWF0ZXJpYWwgPSBnZXRNYXRlcmlhbCg1MCwgbmFtZSk7CiAgICAgIHZhciBsYWJlbCA9IG5ldyBDaXJjbGUoZy5wcm9wZXJ0aWVzLmNwLCB7CiAgICAgICAgbGVuOiBuYW1lLmxlbmd0aAogICAgICB9LCBsYWJlbE1hdGVyaWFsLCB0aHJlZUxheWVyKTsKICAgICAgbGFiZWxNZXNoZXMucHVzaChsYWJlbCk7CiAgICB9KTsKICAgIHRocmVlTGF5ZXIuYWRkTWVzaChsYWJlbE1lc2hlcyk7CiAgICBhZGRMaW5lcyhkYXRhKTsKICB9OwoKICB0aHJlZUxheWVyLmFkZFRvKG1hcCk7CiAgSW5pdEJsb29tKCk7Cn0gLy8gUG9seWdvbiB0byBMaW5lU3RyaW5nCgoKZnVuY3Rpb24gdHJhbnNsYXRlKGRhdGEpIHsKICB2YXIgZ2VvanNvbiA9IHsKICAgICJmZWF0dXJlcyI6IFtdLAogICAgInR5cGUiOiAiRmVhdHVyZUNvbGxlY3Rpb24iCiAgfTsKICBkYXRhLmZlYXR1cmVzLmZvckVhY2goZnVuY3Rpb24gKGcpIHsKICAgIC8vIFRPRE86IOWkhOeQhk11bHRpUG9seWdvbgogICAgaWYgKGcuZ2VvbWV0cnkudHlwZSA9PSAiTXVsdGlQb2x5Z29uIikgcmV0dXJuOyAvLyDmoYbmnrbmnInkuIDkuKrlpYfokannmoRCVUfvvIzlnZDmoIfngrnluo/liJfkuK3kuI3og73mnInov57nu63nm7jlkIznmoTngrnvvIzlnKjmraTnroDljZXljrvph43jgIIKCiAgICB2YXIgY29vcmRpbmF0ZXMgPSBbXTsKICAgIHZhciBjYWNoZSA9IG5ldyBTZXQoKTsKICAgIGcuZ2VvbWV0cnkuY29vcmRpbmF0ZXNbMF0uZm9yRWFjaChmdW5jdGlvbiAoYywgaikgewogICAgICBpZiAoIWNhY2hlLmhhcyhjLmpvaW4oIl8iKSkpIHsKICAgICAgICBpZiAoaiA+IDApIGNhY2hlLmFkZChjLmpvaW4oIl8iKSk7CiAgICAgICAgY29vcmRpbmF0ZXMucHVzaChjKTsKICAgICAgfQogICAgfSk7CiAgICB2YXIgZCA9IHsKICAgICAgInR5cGUiOiAiRmVhdHVyZSIsCiAgICAgICJwcm9wZXJ0aWVzIjogewogICAgICAgICJuYW1lIjogZy5wcm9wZXJ0aWVzLm5hbWUsCiAgICAgICAgImRhdGUiOiBnLnByb3BlcnRpZXMuZGF0ZQogICAgICB9LAogICAgICAiZ2VvbWV0cnkiOiB7CiAgICAgICAgInR5cGUiOiAiTGluZVN0cmluZyIsCiAgICAgICAgImNvb3JkaW5hdGVzIjogY29vcmRpbmF0ZXMKICAgICAgfQogICAgfTsKICAgIGdlb2pzb24uZmVhdHVyZXMucHVzaChkKTsKICB9KTsKICByZXR1cm4gZ2VvanNvbjsKfQoKZnVuY3Rpb24gYWRkTGluZXMoZGF0YSkgewogIHZhciBiYXNlTGluZU1hdGVyaWFsID0gbmV3IFRIUkVFLkxpbmVCYXNpY01hdGVyaWFsKHsKICAgIGxpbmV3aWR0aDogMSwKICAgIGNvbG9yOiAncmdiKDI1NSw5MCwwKScsCiAgICAvLyBvcGFjaXR5OiAwLjUsCiAgICBibGVuZGluZzogVEhSRUUuQWRkaXRpdmVCbGVuZGluZywKICAgIHRyYW5zcGFyZW50OiB0cnVlCiAgfSk7CiAgdmFyIGdlb2pzb24gPSB0cmFuc2xhdGUoZGF0YSk7CiAgdmFyIGxpbmVTdHJpbmdzID0gbWFwdGFsa3MuR2VvSlNPTi50b0dlb21ldHJ5KGdlb2pzb24pOwogIHZhciBiYXNlTGluZXMgPSBsaW5lU3RyaW5ncy5tYXAoZnVuY3Rpb24gKGQpIHsKICAgIHZhciBsaW5lID0gdGhyZWVMYXllci50b0xpbmUoZCwge30sIGJhc2VMaW5lTWF0ZXJpYWwpOwogICAgbGluZS5nZXRPYmplY3QzZCgpLmxheWVycy5lbmFibGUoMSk7CiAgICByZXR1cm4gbGluZTsKICB9KTsKICB0aHJlZUxheWVyLmFkZE1lc2goYmFzZUxpbmVzKTsKICBhZGRFeHRydWRlTGluZShsaW5lU3RyaW5ncyk7Cn0KCmZ1bmN0aW9uIGFkZEV4dHJ1ZGVMaW5lKGxpbmVTdHJpbmdzKSB7CiAgdmFyIG1hdGVyaWFsID0gbmV3IFRIUkVFLk1lc2hCYXNpY01hdGVyaWFsKHsKICAgIGNvbG9yOiAncmdiKDI1NSw0NSwwKScsCiAgICB0cmFuc3BhcmVudDogdHJ1ZSwKICAgIGJsZW5kaW5nOiBUSFJFRS5BZGRpdGl2ZUJsZW5kaW5nCiAgfSk7CiAgdmFyIGhpZ2hsaWdodG1hdGVyaWFsID0gbmV3IFRIUkVFLk1lc2hCYXNpY01hdGVyaWFsKHsKICAgIGNvbG9yOiAnI2ZmZmZmZicsCiAgICB0cmFuc3BhcmVudDogdHJ1ZQogIH0pOwogIHZhciBsaW5lcyA9IFtdOwogIGxpbmVTdHJpbmdzLmZvckVhY2goZnVuY3Rpb24gKGQpIHsKICAgIHZhciBsaW5lID0gdGhyZWVMYXllci50b0V4dHJ1ZGVMaW5lKGQsIHsKICAgICAgYWx0aXR1ZGU6IDAsCiAgICAgIHdpZHRoOiAxMCwKICAgICAgaGVpZ2h0OiA1MAogICAgfSwgbWF0ZXJpYWwpOwogICAgbGluZS5nZXRPYmplY3QzZCgpLmxheWVycy5lbmFibGUoMSk7CiAgICBsaW5lcy5wdXNoKGxpbmUpOwogIH0pOwogIHZhciBsaW5lVHJhaWxzID0gW107CiAgbGluZVN0cmluZ3MuZm9yRWFjaChmdW5jdGlvbiAoZCkgewogICAgdmFyIGxpbmUgPSB0aHJlZUxheWVyLnRvRXh0cnVkZUxpbmVUcmFpbChkLCB7CiAgICAgIGFsdGl0dWRlOiAwLAogICAgICB3aWR0aDogMTAsCiAgICAgIGhlaWdodDogMzAsCiAgICAgIGNodW5rTGVuZ3RoOiA1MCwKICAgICAgc3BlZWQ6IDEsCiAgICAgIHRyYWlsOiA2CiAgICB9LCBoaWdobGlnaHRtYXRlcmlhbCk7CiAgICBsaW5lLmdldE9iamVjdDNkKCkubGF5ZXJzLmVuYWJsZSgxKTsKICAgIGxpbmVUcmFpbHMucHVzaChsaW5lKTsKICB9KTsKICB0aHJlZUxheWVyLmFkZE1lc2gobGluZXMpOwogIHRocmVlTGF5ZXIuYWRkTWVzaChsaW5lVHJhaWxzKTsKICBhbmltYXRpb24oKTsKfQoKZnVuY3Rpb24gZ2V0TWF0ZXJpYWwoZm9udFNpemUsIHRleHQpIHsKICB2YXIgU0laRSA9IDQwMDsKICB2YXIgY2FudmFzID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnY2FudmFzJyk7CiAgY2FudmFzLndpZHRoID0gU0laRTsKICBjYW52YXMuaGVpZ2h0ID0gMTYgKiB0ZXh0Lmxlbmd0aDsKICB2YXIgY3R4ID0gY2FudmFzLmdldENvbnRleHQoJzJkJyk7CiAgdmFyIGdyYWRpZW50ID0gY3R4LmNyZWF0ZUxpbmVhckdyYWRpZW50KDAsIDAsIFNJWkUsIDApOyAvLyBncmFkaWVudC5hZGRDb2xvclN0b3AoIjAiLCAiI2ZmZmZmZiIpOwoKICBncmFkaWVudC5hZGRDb2xvclN0b3AoIjAuMCIsICIjZmYwMDAwIik7CiAgZ3JhZGllbnQuYWRkQ29sb3JTdG9wKCIxLjAiLCAiI2ZmMDAwMCIpOyAvLyBncmFkaWVudC5hZGRDb2xvclN0b3AoIjAuNjYiLCAid2hpdGUiKTsKICAvLyBncmFkaWVudC5hZGRDb2xvclN0b3AoIjEuMCIsICJyZWQiKTsKCiAgY3R4LnN0cm9rZVN0eWxlID0gZ3JhZGllbnQ7IC8vIGN0eC5saW5lV2lkdGggPSAyMDsKCiAgY3R4LmZvbnQgPSAiIi5jb25jYXQoZm9udFNpemUsICJweCBBcmlhIik7CiAgY3R4LnRleHRBbGlnbiA9ICdsZWZ0JzsKICBjdHgudGV4dEJhc2VsaW5lID0gJ3RvcCc7CiAgY3R4LmZpbGxTdHlsZSA9ICIjZjAwIjsKICBjdHguZmlsbFRleHQodGV4dCwgNSwgMTApOyAvLyBjdHgucmVjdCgwLCAwLCBTSVpFICogMywgU0laRSk7CgogIHZhciB0ZXh0dXJlID0gbmV3IFRIUkVFLlRleHR1cmUoY2FudmFzKTsKICB0ZXh0dXJlLm5lZWRzVXBkYXRlID0gdHJ1ZTsgLy/kvb/nlKjotLTlm77ml7bov5vooYzmm7TmlrAKCiAgdmFyIG1hdGVyaWFsID0gbmV3IFRIUkVFLk1lc2hQaG9uZ01hdGVyaWFsKHsKICAgIG1hcDogdGV4dHVyZSwKICAgIHNpZGU6IFRIUkVFLkZyb250U2lkZSwKICAgIHRyYW5zcGFyZW50OiBmYWxzZQogIH0pOwogIHJldHVybiBtYXRlcmlhbDsKfQoKdmFyIE9QVElPTlMgPSB7CiAgbGVuOiA0LAogIGFsdGl0dWRlOiAwCn07Cgp2YXIgQ2lyY2xlID0KLyojX19QVVJFX18qLwpmdW5jdGlvbiAoX0Jhc2VPYmplY3QpIHsKICBfaW5oZXJpdHMoQ2lyY2xlLCBfQmFzZU9iamVjdCk7CgogIGZ1bmN0aW9uIENpcmNsZShjb29yZGluYXRlLCBvcHRpb25zLCBtYXRlcmlhbCwgbGF5ZXIpIHsKICAgIHZhciBfdGhpczsKCiAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgQ2lyY2xlKTsKCiAgICBvcHRpb25zID0gbWFwdGFsa3MuVXRpbC5leHRlbmQoe30sIE9QVElPTlMsIG9wdGlvbnMsIHsKICAgICAgbGF5ZXI6IGxheWVyLAogICAgICBjb29yZGluYXRlOiBjb29yZGluYXRlCiAgICB9KTsKICAgIF90aGlzID0gX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4odGhpcywgX2dldFByb3RvdHlwZU9mKENpcmNsZSkuY2FsbCh0aGlzKSk7IC8vSW5pdGlhbGl6ZSBpbnRlcm5hbCBjb25maWd1cmF0aW9uCiAgICAvLyBodHRwczovL2dpdGh1Yi5jb20vbWFwdGFsa3MvbWFwdGFsa3MudGhyZWUvYmxvYi8xZTQ1ZjUyMzhmNTAwMjI1YWRhMWRlYjA5YjhiYWIxOGMxYjUyY2YyL3NyYy9CYXNlT2JqZWN0LmpzI0wxMzUKCiAgICBfdGhpcy5faW5pdE9wdGlvbnMob3B0aW9ucyk7IC8vIGNvbnN0IHsgYWx0aXR1ZGUgfSA9IG9wdGlvbnM7CiAgICAvLyBkZWJ1Z2dlcgogICAgLy9nZW5lcmF0ZSBnZW9tZXRyeQogICAgLy8gY29uc3QgciA9IGxheWVyLmRpc3RhbmNlVG9WZWN0b3IzKHJhZGl1cywgcmFkaXVzKS54CgoKICAgIHZhciBnZW9tZXRyeSA9IG5ldyBUSFJFRS5QbGFuZUdlb21ldHJ5KG9wdGlvbnMubGVuICogMS41LCA0LjUpOyAvL0luaXRpYWxpemUgaW50ZXJuYWwgb2JqZWN0M2QKICAgIC8vIGh0dHBzOi8vZ2l0aHViLmNvbS9tYXB0YWxrcy9tYXB0YWxrcy50aHJlZS9ibG9iLzFlNDVmNTIzOGY1MDAyMjVhZGExZGViMDliOGJhYjE4YzFiNTJjZjIvc3JjL0Jhc2VPYmplY3QuanMjTDE0MAoKICAgIF90aGlzLl9jcmVhdGVNZXNoKGdlb21ldHJ5LCBtYXRlcmlhbCk7IC8vc2V0IG9iamVjdDNkIHBvc2l0aW9uCiAgICAvLyBjb25zdCB6ID0gbGF5ZXIuZGlzdGFuY2VUb1ZlY3RvcjMoYWx0aXR1ZGUsIGFsdGl0dWRlKS54OwoKCiAgICB2YXIgcG9zaXRpb24gPSBsYXllci5jb29yZGluYXRlVG9WZWN0b3IzKGNvb3JkaW5hdGUsIDApOwoKICAgIF90aGlzLmdldE9iamVjdDNkKCkucG9zaXRpb24uY29weShwb3NpdGlvbik7IC8vIHRoaXMuZ2V0T2JqZWN0M2QoKS5yb3RhdGlvbi54ID0gLU1hdGguUEk7CgoKICAgIHJldHVybiBfdGhpczsKICB9CiAgLyoqCiAgICogYW5pbWF0ZVNob3cgdGVzdAogICAqIAogICAqICovCgoKICBfY3JlYXRlQ2xhc3MoQ2lyY2xlLCBbewogICAga2V5OiAiYW5pbWF0ZVNob3ciLAogICAgdmFsdWU6IGZ1bmN0aW9uIGFuaW1hdGVTaG93KCkgewogICAgICB2YXIgX3RoaXMyID0gdGhpczsKCiAgICAgIHZhciBvcHRpb25zID0gYXJndW1lbnRzLmxlbmd0aCA+IDAgJiYgYXJndW1lbnRzWzBdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMF0gOiB7fTsKICAgICAgdmFyIGNiID0gYXJndW1lbnRzLmxlbmd0aCA+IDEgPyBhcmd1bWVudHNbMV0gOiB1bmRlZmluZWQ7CgogICAgICBpZiAodGhpcy5fc2hvd1BsYXllcikgewogICAgICAgIHRoaXMuX3Nob3dQbGF5ZXIuY2FuY2VsKCk7CiAgICAgIH0KCiAgICAgIGlmIChtYXB0YWxrcy5VdGlsLmlzRnVuY3Rpb24ob3B0aW9ucykpIHsKICAgICAgICBvcHRpb25zID0ge307CiAgICAgICAgY2IgPSBvcHRpb25zOwogICAgICB9CgogICAgICB2YXIgZHVyYXRpb24gPSBvcHRpb25zWydkdXJhdGlvbiddIHx8IDEwMDAsCiAgICAgICAgICBlYXNpbmcgPSBvcHRpb25zWydlYXNpbmcnXSB8fCAnb3V0JzsKICAgICAgdmFyIHBsYXllciA9IHRoaXMuX3Nob3dQbGF5ZXIgPSBtYXB0YWxrcy5hbmltYXRpb24uQW5pbWF0aW9uLmFuaW1hdGUoewogICAgICAgICdzY2FsZSc6IDEKICAgICAgfSwgewogICAgICAgICdkdXJhdGlvbic6IGR1cmF0aW9uLAogICAgICAgICdlYXNpbmcnOiBlYXNpbmcKICAgICAgfSwgZnVuY3Rpb24gKGZyYW1lKSB7CiAgICAgICAgdmFyIHNjYWxlID0gZnJhbWUuc3R5bGVzLnNjYWxlOwoKICAgICAgICBpZiAoc2NhbGUgPiAwKSB7CiAgICAgICAgICBfdGhpczIuZ2V0T2JqZWN0M2QoKS5zY2FsZS5zZXQoc2NhbGUsIHNjYWxlLCBzY2FsZSk7CiAgICAgICAgfQoKICAgICAgICBpZiAoY2IpIHsKICAgICAgICAgIGNiKGZyYW1lLCBzY2FsZSk7CiAgICAgICAgfQogICAgICB9KTsKICAgICAgcGxheWVyLnBsYXkoKTsKICAgICAgcmV0dXJuIHBsYXllcjsKICAgIH0KICB9XSk7CgogIHJldHVybiBDaXJjbGU7Cn0oQmFzZU9iamVjdCk7CgpmdW5jdGlvbiBhbmltYXRpb24oKSB7CiAgLy8gbGF5ZXIgYW5pbWF0aW9uIHN1cHBvcnQgU2tpcHBpbmcgZnJhbWVzCiAgdGhyZWVMYXllci5fbmVlZHNVcGRhdGUgPSAhdGhyZWVMYXllci5fbmVlZHNVcGRhdGU7CgogIGlmICh0aHJlZUxheWVyLl9uZWVkc1VwZGF0ZSkgewogICAgdGhyZWVMYXllci5nZXRSZW5kZXJlcigpLmNsZWFyQ2FudmFzKCk7CiAgICB0aHJlZUxheWVyLnJlbmRlclNjZW5lKCk7CiAgfQoKICByZXF1ZXN0QW5pbWF0aW9uRnJhbWUoYW5pbWF0aW9uKTsKfQoKZXhwb3J0IHsgbG9hZExpbmVzM0QgfTs="},{"version":3,"sources":["C:/Users/Meng Yin/Desktop/COVID-19-Visualization/www/src/js/lines3D.js"],"names":["maptalks","THREE","ThreeLayer","BaseObject","InitBloom","threeLayer","loadLines3D","map","data","labelMeshes","getLayer","remove","forceRenderOnMoving","forceRenderOnRotating","prepareToDraw","gl","scene","light","DirectionalLight","position","set","normalize","add","initBloom","setRendererRenderScene","features","forEach","g","name","properties","length","labelMaterial","getMaterial","label","Circle","cp","len","push","addMesh","addLines","addTo","translate","geojson","geometry","type","coordinates","cache","Set","c","j","has","join","d","date","baseLineMaterial","LineBasicMaterial","linewidth","color","blending","AdditiveBlending","transparent","lineStrings","GeoJSON","toGeometry","baseLines","line","toLine","getObject3d","layers","enable","addExtrudeLine","material","MeshBasicMaterial","highlightmaterial","lines","toExtrudeLine","altitude","width","height","lineTrails","toExtrudeLineTrail","chunkLength","speed","trail","animation","fontSize","text","SIZE","canvas","document","createElement","ctx","getContext","gradient","createLinearGradient","addColorStop","strokeStyle","font","textAlign","textBaseline","fillStyle","fillText","texture","Texture","needsUpdate","MeshPhongMaterial","side","FrontSide","OPTIONS","coordinate","options","layer","Util","extend","_initOptions","PlaneGeometry","_createMesh","coordinateToVector3","copy","cb","_showPlayer","cancel","isFunction","duration","easing","player","Animation","animate","frame","scale","styles","play","_needsUpdate","getRenderer","clearCanvas","renderScene","requestAnimationFrame"],"mappings":"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","sourcesContent":["import * as maptalks from 'maptalks';\nimport * as THREE from \"three\";\nimport { ThreeLayer, BaseObject } from 'maptalks.three';\nimport { InitBloom } from \"./bloom\";\n\n\nlet threeLayer;\n\nfunction loadLines3D (map, data) {\n    var labelMeshes = [];\n    if (map.getLayer('lines')) threeLayer.remove();\n    threeLayer = new ThreeLayer('lines', {\n        forceRenderOnMoving: true, forceRenderOnRotating: true\n    });\n\n    threeLayer.prepareToDraw = function (gl, scene) {\n        var light = new THREE.DirectionalLight(0xffffff);\n        light.position.set(0, -10, 10).normalize();\n        scene.add(light);\n        \n        this.initBloom();\n        this.setRendererRenderScene();\n\n        data.features.forEach(function (g) {\n            // if (g.geometry.type == \"MultiPolygon\") return;\n            let name = g.properties.name;\n            if (name.length < 5) name += \"   \"\n            let labelMaterial = getMaterial(50, name);\n            let label = new Circle(g.properties.cp, {\n                len: name.length\n            }, labelMaterial, threeLayer);\n            labelMeshes.push(label);\n        });\n        threeLayer.addMesh(labelMeshes);\n        addLines(data);\n    };\n    threeLayer.addTo(map);\n    InitBloom();\n}\n\n// Polygon to LineString\nfunction translate (data) {\n    let geojson = {\"features\": [], \"type\": \"FeatureCollection\"};\n    data.features.forEach((g) => {\n        // TODO: 处理MultiPolygon\n        if (g.geometry.type == \"MultiPolygon\") return;\n        // 框架有一个奇葩的BUG，坐标点序列中不能有连续相同的点，在此简单去重。\n        let coordinates = [];\n        let cache = new Set();\n        g.geometry.coordinates[0].forEach((c, j) => {\n            if (!cache.has(c.join(\"_\"))) {\n                if (j > 0) cache.add(c.join(\"_\"))\n                coordinates.push(c);\n            }\n        });\n        let d = {\n            \"type\": \"Feature\",\n            \"properties\": {\n                \"name\": g.properties.name, \n                \"date\": g.properties.date\n            },\n            \"geometry\": {\"type\": \"LineString\", \"coordinates\": coordinates}\n        }\n        geojson.features.push(d);\n    })\n    return geojson;\n}\n\nfunction addLines(data) {\n    var baseLineMaterial = new THREE.LineBasicMaterial({\n        linewidth: 1,\n        color: 'rgb(255,90,0)',\n        // opacity: 0.5,\n        blending: THREE.AdditiveBlending,\n        transparent: true\n    });\n    let geojson = translate(data);\n    var lineStrings = maptalks.GeoJSON.toGeometry(geojson);\n    let baseLines = lineStrings.map(function (d) {\n        var line = threeLayer.toLine(d, {}, baseLineMaterial);\n        line.getObject3d().layers.enable(1);\n        return line;\n    });\n    threeLayer.addMesh(baseLines);\n\n    addExtrudeLine(lineStrings);\n}\n\n\nfunction addExtrudeLine(lineStrings) {\n    var material = new THREE.MeshBasicMaterial({\n        color: 'rgb(255,45,0)', transparent: true, blending: THREE.AdditiveBlending\n    });\n    var highlightmaterial = new THREE.MeshBasicMaterial({ color: '#ffffff', transparent: true });\n    var lines = [];\n    lineStrings.forEach((d) => {\n        let line = threeLayer.toExtrudeLine(d, { altitude: 0, width: 10, height: 50 }, material);\n        line.getObject3d().layers.enable(1);\n        lines.push(line);\n    });\n    let lineTrails = [];\n    lineStrings.forEach((d) => {\n        var line = threeLayer.toExtrudeLineTrail(d, { altitude: 0, width: 10, height: 30, chunkLength: 50, speed: 1, trail: 6 }, highlightmaterial);\n        line.getObject3d().layers.enable(1);\n        lineTrails.push(line);\n    });\n    threeLayer.addMesh(lines);\n    threeLayer.addMesh(lineTrails);\n    animation();\n}\n\nfunction getMaterial(fontSize, text) {\n    var SIZE = 400;\n    var canvas = document.createElement('canvas');\n    canvas.width = SIZE;\n    canvas.height = 16 * text.length;\n    var ctx = canvas.getContext('2d');\n    var gradient = ctx.createLinearGradient(0, 0, SIZE, 0);\n    // gradient.addColorStop(\"0\", \"#ffffff\");\n    gradient.addColorStop(\"0.0\", \"#ff0000\");\n    gradient.addColorStop(\"1.0\", \"#ff0000\");\n    // gradient.addColorStop(\"0.66\", \"white\");\n    // gradient.addColorStop(\"1.0\", \"red\");\n\n    ctx.strokeStyle = gradient;\n    // ctx.lineWidth = 20;\n    ctx.font = `${fontSize}px Aria`;\n    ctx.textAlign = 'left';\n    ctx.textBaseline = 'top';\n    ctx.fillStyle = \"#f00\";\n    ctx.fillText(text, 5, 10);\n    // ctx.rect(0, 0, SIZE * 3, SIZE);\n    var texture = new THREE.Texture(canvas);\n    texture.needsUpdate = true; //使用贴图时进行更新\n\n    var material = new THREE.MeshPhongMaterial({\n        map: texture,\n        side: THREE.FrontSide,\n        transparent: false\n    });\n    return material;\n}\n\nvar OPTIONS = {\n    len: 4,\n    altitude: 0\n};\n\nclass Circle extends BaseObject {\n    constructor(coordinate, options, material, layer) {\n        options = maptalks.Util.extend({}, OPTIONS, options, { layer, coordinate });\n        super();\n        //Initialize internal configuration\n        // https://github.com/maptalks/maptalks.three/blob/1e45f5238f500225ada1deb09b8bab18c1b52cf2/src/BaseObject.js#L135\n        this._initOptions(options);\n        // const { altitude } = options;\n        // debugger\n        //generate geometry\n        // const r = layer.distanceToVector3(radius, radius).x\n        const geometry = new THREE.PlaneGeometry(options.len * 1.5, 4.5);\n\n        //Initialize internal object3d\n        // https://github.com/maptalks/maptalks.three/blob/1e45f5238f500225ada1deb09b8bab18c1b52cf2/src/BaseObject.js#L140\n        this._createMesh(geometry, material);\n\n        //set object3d position\n        // const z = layer.distanceToVector3(altitude, altitude).x;\n        const position = layer.coordinateToVector3(coordinate, 0);\n        this.getObject3d().position.copy(position);\n        // this.getObject3d().rotation.x = -Math.PI;\n    }\n    /**\n     * animateShow test\n     * \n     * */\n    animateShow(options = {}, cb) {\n        if (this._showPlayer) {\n            this._showPlayer.cancel();\n        }\n        if (maptalks.Util.isFunction(options)) {\n            options = {};\n            cb = options;\n        }\n        const duration = options['duration'] || 1000,\n            easing = options['easing'] || 'out';\n        const player = this._showPlayer = maptalks.animation.Animation.animate({\n            'scale': 1\n        }, {\n            'duration': duration,\n            'easing': easing\n        }, frame => {\n            const scale = frame.styles.scale;\n            if (scale > 0) {\n                this.getObject3d().scale.set(scale, scale, scale);\n            }\n            if (cb) {\n                cb(frame, scale);\n            }\n        });\n        player.play();\n        return player;\n    }\n}\n\nfunction animation() {\n    // layer animation support Skipping frames\n    threeLayer._needsUpdate = !threeLayer._needsUpdate;\n    if (threeLayer._needsUpdate) {\n        threeLayer.getRenderer().clearCanvas();\n        threeLayer.renderScene();\n    }\n    requestAnimationFrame(animation);\n}\n\n\nexport {loadLines3D};"]}]}